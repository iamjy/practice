/**
 * @file
 * @author
 * @date
 * @brief
 * @see
 */

#include "common.h"
#include "main.h"

/*****************************************************************************
 * Macro definitions
 *****************************************************************************/
#define TEST_DEVICE    "/dev/mycdrv_generic_dev"

/*****************************************************************************
 * Enumerations
 *****************************************************************************/

/*****************************************************************************
 * Structures
 *****************************************************************************/
/**
 *
 */

/*****************************************************************************
 * Global variables
 *****************************************************************************/

/*****************************************************************************
 * Static variables
 *****************************************************************************/

/*****************************************************************************
 * Extern variables
 *****************************************************************************/

/*****************************************************************************
 * Function prototypes
 *****************************************************************************/

/*****************************************************************************
 * Function definitions
 *****************************************************************************/
int main(int argc, char const *argv[])
{
	int fd = -1;
	char buff[128] = {0};
	uint32_t cnt = 10;
	int read_val = 0;

	fd = open(TEST_DEVICE, O_RDWR | O_NDELAY);
	if (fd < 0) {
		return -1;
	}

	printf("wait... input\n");

	while (1) {
		static int i = 0;

		if (cnt == 0)
			break;

		read_val = read(fd, buff, cnt);
		for (i = 0; i < cnt; i++) {
			printf("[%d]read data : [%02X]\n", read_val, buff[i]);
		}
	}

	printf("input ok...\n");

	return 0;
}
