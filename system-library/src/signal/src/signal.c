/**
 * @file
 * @author
 * @date
 * @brief
 * @see
 */

/*****************************************************************************
 * Header Inclusion
 *****************************************************************************/
#include <stdint.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <signal.h>
#include <setjmp.h>

/*****************************************************************************
 * Macro definitions
 *****************************************************************************/
#define MAXLINE 256

/*****************************************************************************
 * Structures
 *****************************************************************************/

/*****************************************************************************
 * Global variables
 *****************************************************************************/

/*****************************************************************************
 * Static variables
 *****************************************************************************/
jmp_buf env;

/*****************************************************************************
 * Extern variables
 *****************************************************************************/

/*****************************************************************************
 * Function prototypes
 *****************************************************************************/
void sigcatch(sig);

/*****************************************************************************
 * Function definitions
 *****************************************************************************/
int main(int argc, char *argv[])
{
	void sigcatch();
	char line[MAXLINE];

	sigset(SIGINT, sigcatch);
	setjmp(env);

	for (;;) {
		printf("Prompt: ");
		gets(line);
	}
}

void sigcatch(sig)
int sig;
{
	int ch;

	printf("\nDo you want to exit (y or n)? ");

	ch = getchar();
	getchar();
	if (ch == 'y')
		exit(1);

	sigrelse(SIGINT);
	longjmp(env, 1);
}

